---
title: Qwik City Adaptors and Middleware
contributors:
  - adamdbradley
---

# Adaptors 和 Middleware

Qwik City 中间件是 将服务器渲染框架（如 Cloudflare、Netlify、Express 等）与 Qwik City 元框架连接起来的 胶水代码。

Qwik City 预捆绑：

- [cloudflare-pages](../cloudflare-pages/index.mdx)
- [netlify-edge](../netlify-edge/index.mdx)
- [node](../node/index.mdx)

## Build

使用Qwik City vite cli `--ssr` 指定SSR入口。

```bash
vite build --ssr src/entry.MIDDLEWARE.ts
```

默认输出目录是 `./server` 并且可以通过设置 qwikVite 插件选项来配置。

```typescript
// file vite.config.ts
import { qwikVite } from '@builder.io/qwik/optimizer';

export default defineConfig(() => {
  return {
    plugins: [
      // ...other plugins
      qwikVite({
        ssr: {
          outDir: 'CUSTOM_DIR',
        },
      }),
    ],
  };
});
```

## 高级

`requestHandler()` 功能是上述每个中间件捆绑包使用的，以便将它们的请求/响应转换为 Qwik City 使用的标准格式。
该功能可用于为特定的服务器框架提供中间件。

如果缺少中间件并且您希望添加它，请查看上述每个中间件源代码 了解`requestHandler()`功能如何处理请求。当然更好的是，我们很乐意收到您的中间件贡献！
[欢迎 PR](https://github.com/BuilderIO/qwik/tree/main/packages/qwik-city/middleware)!
