---
title: Qwik City and Partytown
contributors:
  - manucorporat
  - leifermendez
  - shairez
---

# Partytown

第三方脚本通过阻塞主线程大大减慢了您的初始页面加载速度。

Partytown 是一个工具，它允许您使用web worker将第三方脚本（如 Google Analytics、Facebook Pixel 等）推迟到主线程之外。
有关此工具的更多信息，请访问 [Partytown 文档](https://partytown.builder.io)。

## 使用

您可以使用以下 Qwik 启动脚本轻松添加 Partytown：

```bash
npm run qwik add partytown
```

前面的命令会更新您的应用并在 `vite.config.ts` 中设置正确的配置。

它还将新文件添加到您的`components`文件夹中。

```typescript
// file root.tsx

import { QwikPartytown } from './components/partytown/partytown';

export default component$(() => {
  return (
    <QwikCity>
      <head>
        <meta charSet="utf-8" />
        <QwikPartytown forward={["dataLayer.push"]} />;

        <script
        async
        type="text/partytown"
        src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"
        />;

      </head>
      <body lang="en">
      </body>
    </QwikCity>
  );
});
```

## 高级

如需进一步配置 Partytown 的更多选项，请访问 [Partytown 文档](https://partytown.builder.io/configuration)
